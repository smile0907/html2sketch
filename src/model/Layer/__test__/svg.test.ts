import { Style, Svg } from '../../index';

describe('Svg 类', () => {
  it('圆角矩形可正常转换', function() {
    const svg = new Svg({
      x: 0,
      y: 0,
      width: 100,
      height: 100,
      path:
        'M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z',
    });

    expect(svg.toSketchJSON()).toStrictEqual({
      _class: 'shapePath',
      do_objectID: 'uuid',
      booleanOperation: -1,
      isFixedToViewport: false,
      isFlippedHorizontal: false,
      isFlippedVertical: false,
      isLocked: false,
      isVisible: true,
      layerListExpandedType: 0,
      name: '路径',
      nameIsFixed: false,
      resizingConstraint: 63,
      resizingType: 0,
      rotation: 0,
      shouldBreakMaskChain: false,
      exportOptions: {
        _class: 'exportOptions',
        includedLayerIds: [],
        layerOptions: 0,
        shouldTrim: false,
        exportFormats: [],
      },
      frame: {
        _class: 'rect',
        constrainProportions: false,
        height: 100,
        width: 100,
        x: 0,
        y: 0,
      },
      clippingMaskMode: 0,
      hasClippingMask: false,
      style: new Style().toSketchJSON(),
      edited: true,
      isClosed: true,
      pointRadiusBehaviour: 1,
      points: [
        {
          _class: 'curvePoint',
          cornerRadius: 0,
          curveFrom: '{0.9891304347826086, 0}',
          curveMode: 4,
          curveTo: '{0.9951086956521739, 0}',
          hasCurveFrom: false,
          hasCurveTo: true,
          point: '{0.9891304347826086, 0}',
        },
        {
          _class: 'curvePoint',
          cornerRadius: 0,
          curveFrom: '{0.0048913043478260865, 0}',
          curveMode: 4,
          curveTo: '{0.010869565217391304, 0}',
          hasCurveFrom: true,
          hasCurveTo: false,
          point: '{0.010869565217391304, 0}',
        },
        {
          _class: 'curvePoint',
          cornerRadius: 0,
          curveFrom: '{0, 0.10526315789473684}',
          curveMode: 4,
          curveTo: '{0, 0.04736842105263158}',
          hasCurveFrom: false,
          hasCurveTo: true,
          point: '{0, 0.10526315789473684}',
        },
        {
          _class: 'curvePoint',
          cornerRadius: 0,
          curveFrom: '{0, 0.9526315789473684}',
          curveMode: 4,
          curveTo: '{0, 0.8947368421052632}',
          hasCurveFrom: true,
          hasCurveTo: false,
          point: '{0, 0.8947368421052632}',
        },
        {
          _class: 'curvePoint',
          cornerRadius: 0,
          curveFrom: '{0.010869565217391304, 1}',
          curveMode: 4,
          curveTo: '{0.004891304347826087, 1}',
          hasCurveFrom: false,
          hasCurveTo: true,
          point: '{0.010869565217391304, 1}',
        },
        {
          _class: 'curvePoint',
          cornerRadius: 0,
          curveFrom: '{0.995108695652174, 1}',
          curveMode: 4,
          curveTo: '{0.9891304347826088, 1}',
          hasCurveFrom: true,
          hasCurveTo: false,
          point: '{0.9891304347826088, 1}',
        },
        {
          _class: 'curvePoint',
          cornerRadius: 0,
          curveFrom: '{1, 0.8947368421052632}',
          curveMode: 4,
          curveTo: '{1, 0.9526315789473684}',
          hasCurveFrom: false,
          hasCurveTo: true,
          point: '{1, 0.8947368421052632}',
        },
        {
          _class: 'curvePoint',
          cornerRadius: 0,
          curveFrom: '{1, 0.04736842105263157}',
          curveMode: 4,
          curveTo: '{1, 0.10526315789473684}',
          hasCurveFrom: true,
          hasCurveTo: false,
          point: '{1, 0.10526315789473684}',
        },
      ],
    });
  });
  it('StepBackwardOutlined 正常渲染', () => {
    const svg = new Svg({
      x: 0,
      y: 0,
      width: 100,
      height: 100,
      path:
        'm347.6 528.95l383.2 301.02c14.25 11.2 35.2 1.1 35.2 -16.95v-602.05c0 -18.05 -20.95 -28.14 -35.2 -16.94l-383.19999999999993 301.02a21.53 21.53 0 0 0 0 33.9m-17.600000000000023 335.04999999999995h-64a8 8 0 0 1 -8 -8v-688a8 8 0 0 1 8 -8h64a8 8 0 0 1 8 8v688a8 8 0 0 1 -8 8',
    });

    expect(svg.toSketchJSON()).toStrictEqual({
      _class: 'shapeGroup',
      do_objectID: 'uuid',
      booleanOperation: -1,
      isFixedToViewport: false,
      isFlippedHorizontal: false,
      isFlippedVertical: false,
      isLocked: false,
      isVisible: true,
      layerListExpandedType: 2,
      name: '形状',
      nameIsFixed: false,
      resizingConstraint: 63,
      resizingType: 0,
      rotation: 0,
      shouldBreakMaskChain: false,
      exportOptions: {
        _class: 'exportOptions',
        includedLayerIds: [],
        layerOptions: 0,
        shouldTrim: false,
        exportFormats: [],
      },
      frame: {
        _class: 'rect',
        constrainProportions: false,
        height: 100,
        width: 100,
        x: 0,
        y: 0,
      },
      clippingMaskMode: 0,
      hasClippingMask: false,
      style: new Style().toSketchJSON(),
      hasClickThrough: false,
      groupLayout: { _class: 'MSImmutableFreeformGroupLayout' },
      layers: [
        {
          _class: 'shapePath',
          do_objectID: '04718C91-1545-4792-AC34-900884E9690D',
          booleanOperation: -1,
          isFixedToViewport: false,
          isFlippedHorizontal: false,
          isFlippedVertical: false,
          isLocked: false,
          isVisible: true,
          layerListExpandedType: 0,
          name: '路径',
          nameIsFixed: false,
          resizingConstraint: 63,
          resizingType: 0,
          rotation: 0,
          shouldBreakMaskChain: false,
          exportOptions: {
            _class: 'exportOptions',
            includedLayerIds: [],
            layerOptions: 0,
            shouldTrim: false,
            exportFormats: [],
          },
          frame: {
            _class: 'rect',
            constrainProportions: false,
            height: 16,
            width: 16,
            x: -3.395738428446185,
            y: -2.500015819373429,
          },
          clippingMaskMode: 0,
          hasClippingMask: false,
          style: {
            _class: 'style',
            do_objectID: 'C440646F-18AD-4A75-8323-05855D2D8FB6',
            endMarkerType: 0,
            miterLimit: 10,
            startMarkerType: 0,
            windingRule: 1,
            blur: {
              _class: 'blur',
              isEnabled: false,
              center: '{0.5, 0.5}',
              motionAngle: 0,
              radius: 0.15625,
              saturation: 1,
              type: 0,
            },
            borderOptions: {
              _class: 'borderOptions',
              isEnabled: true,
              dashPattern: [],
              lineCapStyle: 0,
              lineJoinStyle: 0,
            },
            borders: [],
            colorControls: {
              _class: 'colorControls',
              isEnabled: false,
              brightness: 0,
              contrast: 1,
              hue: 0,
              saturation: 1,
            },
            contextSettings: {
              _class: 'graphicsContextSettings',
              blendMode: 0,
              opacity: 1,
            },
            fills: [],
            innerShadows: [],
            shadows: [],
          },
          edited: true,
          isClosed: true,
          pointRadiusBehaviour: 1,
          points: [
            {
              _class: 'curvePoint',
              cornerRadius: 0,
              curveFrom: '{0.68786841740288662, 0.82145606683583949}',
              curveMode: 4,
              curveTo: '{0.67395240177788662, 0.81051856683583945}',
              hasCurveFrom: true,
              hasCurveTo: false,
              point: '{0.67395240177788662, 0.81051856683583945}',
            },
            {
              _class: 'curvePoint',
              cornerRadius: 0,
              curveFrom: '{0.70832740177788667, 0.7939658324608394}',
              curveMode: 4,
              curveTo: '{0.70832740177788667, 0.81159278558583947}',
              hasCurveFrom: false,
              hasCurveTo: true,
              point: '{0.70832740177788667, 0.7939658324608394}',
            },
            {
              _class: 'curvePoint',
              cornerRadius: 0,
              curveFrom: '{0.70832740177788667, 0.18839942621083924}',
              curveMode: 4,
              curveTo: '{0.70832740177788667, 0.20602637933583925}',
              hasCurveFrom: true,
              hasCurveTo: false,
              point: '{0.70832740177788667, 0.20602637933583925}',
            },
            {
              _class: 'curvePoint',
              cornerRadius: 0,
              curveFrom: '{0.67395240177788662, 0.18948341058583926}',
              curveMode: 4,
              curveTo: '{0.68786841740288662, 0.17854591058583927}',
              hasCurveFrom: false,
              hasCurveTo: true,
              point: '{0.67395240177788662, 0.18948341058583926}',
            },
            {
              _class: 'curvePoint',
              cornerRadius: 0,
              curveFrom: '{0.29464527163362453, 0.48743354606058331}',
              curveMode: 4,
              curveTo: '{0.29973365177788658, 0.48344825433583927}',
              hasCurveFrom: true,
              hasCurveTo: false,
              point: '{0.29973365177788658, 0.48344825433583927}',
            },
            {
              _class: 'curvePoint',
              cornerRadius: 0,
              curveFrom: '{0.29167259822211344, 0.506464282192017}',
              curveMode: 2,
              curveTo: '{0.29167259822211344, 0.49353769522966173}',
              hasCurveFrom: true,
              hasCurveTo: true,
              point: '{0.29167259822211344, 0.5000009887108392}',
            },
            {
              _class: 'curvePoint',
              cornerRadius: 0,
              curveFrom: '{0.29973365177788658, 0.51655372308583947}',
              curveMode: 4,
              curveTo: '{0.29464527163362453, 0.51256843136109542}',
              hasCurveFrom: false,
              hasCurveTo: true,
              point: '{0.29973365177788658, 0.51655372308583947}',
            },
          ],
        },
        {
          _class: 'shapePath',
          do_objectID: '806AC6DA-FE9E-45AD-AD09-50E4E32583CB',
          booleanOperation: -1,
          isFixedToViewport: false,
          isFlippedHorizontal: false,
          isFlippedVertical: false,
          isLocked: false,
          isVisible: true,
          layerListExpandedType: 0,
          name: '路径',
          nameIsFixed: false,
          resizingConstraint: 63,
          resizingType: 0,
          rotation: 0,
          shouldBreakMaskChain: false,
          exportOptions: {
            _class: 'exportOptions',
            includedLayerIds: [],
            layerOptions: 0,
            shouldTrim: false,
            exportFormats: [],
          },
          frame: {
            _class: 'rect',
            constrainProportions: false,
            height: 16,
            width: 16,
            x: -7.2,
            y: -2.5,
          },
          clippingMaskMode: 0,
          hasClippingMask: false,
          style: {
            _class: 'style',
            do_objectID: '567FFCDF-D005-4F8C-B925-B0E0CA149CD3',
            endMarkerType: 0,
            miterLimit: 10,
            startMarkerType: 0,
            windingRule: 1,
            blur: {
              _class: 'blur',
              isEnabled: false,
              center: '{0.5, 0.5}',
              motionAngle: 0,
              radius: 0.15625,
              saturation: 1,
              type: 0,
            },
            borderOptions: {
              _class: 'borderOptions',
              isEnabled: true,
              dashPattern: [],
              lineCapStyle: 0,
              lineJoinStyle: 0,
            },
            borders: [],
            colorControls: {
              _class: 'colorControls',
              isEnabled: false,
              brightness: 0,
              contrast: 1,
              hue: 0,
              saturation: 1,
            },
            contextSettings: {
              _class: 'graphicsContextSettings',
              blendMode: 0,
              opacity: 1,
            },
            fills: [],
            innerShadows: [],
            shadows: [],
          },
          edited: true,
          isClosed: true,
          pointRadiusBehaviour: 1,
          points: [
            {
              _class: 'curvePoint',
              cornerRadius: 0,
              curveFrom: '{0.45447715250169196, 0.84374999999999989}',
              curveMode: 4,
              curveTo: '{0.45999999999999996, 0.84374999999999989}',
              hasCurveFrom: true,
              hasCurveTo: false,
              point: '{0.45999999999999996, 0.84374999999999989}',
            },
            {
              _class: 'curvePoint',
              cornerRadius: 0,
              curveFrom: '{0.44999999999999996, 0.83593749999999989}',
              curveMode: 4,
              curveTo: '{0.44999999999999996, 0.84025222460805293}',
              hasCurveFrom: false,
              hasCurveTo: true,
              point: '{0.44999999999999996, 0.83593749999999989}',
            },
            {
              _class: 'curvePoint',
              cornerRadius: 0,
              curveFrom: '{0.44999999999999996, 0.15974777539194693}',
              curveMode: 4,
              curveTo: '{0.44999999999999996, 0.1640625}',
              hasCurveFrom: true,
              hasCurveTo: false,
              point: '{0.44999999999999996, 0.1640625}',
            },
            {
              _class: 'curvePoint',
              cornerRadius: 0,
              curveFrom: '{0.45999999999999996, 0.15625}',
              curveMode: 4,
              curveTo: '{0.45447715250169196, 0.15625}',
              hasCurveFrom: false,
              hasCurveTo: true,
              point: '{0.45999999999999996, 0.15625}',
            },
            {
              _class: 'curvePoint',
              cornerRadius: 0,
              curveFrom: '{0.54552284749830793, 0.15625}',
              curveMode: 4,
              curveTo: '{0.53999999999999992, 0.15625}',
              hasCurveFrom: true,
              hasCurveTo: false,
              point: '{0.53999999999999992, 0.15625}',
            },
            {
              _class: 'curvePoint',
              cornerRadius: 0,
              curveFrom: '{0.54999999999999993, 0.1640625}',
              curveMode: 4,
              curveTo: '{0.54999999999999993, 0.15974777539194693}',
              hasCurveFrom: false,
              hasCurveTo: true,
              point: '{0.54999999999999993, 0.1640625}',
            },
            {
              _class: 'curvePoint',
              cornerRadius: 0,
              curveFrom: '{0.54999999999999993, 0.84025222460805293}',
              curveMode: 4,
              curveTo: '{0.54999999999999993, 0.83593749999999989}',
              hasCurveFrom: true,
              hasCurveTo: false,
              point: '{0.54999999999999993, 0.83593749999999989}',
            },
            {
              _class: 'curvePoint',
              cornerRadius: 0,
              curveFrom: '{0.53999999999999992, 0.84374999999999989}',
              curveMode: 4,
              curveTo: '{0.54552284749830793, 0.84374999999999989}',
              hasCurveFrom: false,
              hasCurveTo: true,
              point: '{0.53999999999999992, 0.84374999999999989}',
            },
          ],
        },
      ],
      windingRule: 0,
    });
  });
});
