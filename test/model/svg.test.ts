import { Style, Svg } from '../../src/model';

describe('Svg', () => {
  it('圆角矩形可正常转换', function () {
    const svg = new Svg({
      x: 0,
      y: 0,
      width: 100,
      height: 100,
      rawSVGString:
        'M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z',
    });

    expect(svg.toSketchJSON()).toStrictEqual({
      _class: 'shapePath',
      do_objectID: 'uuid',
      booleanOperation: -1,
      isFixedToViewport: false,
      isFlippedHorizontal: false,
      isFlippedVertical: false,
      isLocked: false,
      isVisible: true,
      layerListExpandedType: 0,
      name: '路径',
      nameIsFixed: false,
      resizingConstraint: 63,
      resizingType: 0,
      rotation: 0,
      shouldBreakMaskChain: false,
      exportOptions: {
        _class: 'exportOptions',
        includedLayerIds: [],
        layerOptions: 0,
        shouldTrim: false,
        exportFormats: [],
      },
      frame: {
        _class: 'rect',
        constrainProportions: false,
        height: 100,
        width: 100,
        x: 0,
        y: 0,
      },
      clippingMaskMode: 0,
      hasClippingMask: false,
      style: new Style().toSketchJSON(),
      edited: true,
      isClosed: true,
      pointRadiusBehaviour: 1,
      points: [
        {
          _class: 'curvePoint',
          cornerRadius: 0,
          curveFrom: '{0.9891304347826086, 0}',
          curveMode: 4,
          curveTo: '{0.9951086956521739, 0}',
          hasCurveFrom: false,
          hasCurveTo: true,
          point: '{0.9891304347826086, 0}',
        },
        {
          _class: 'curvePoint',
          cornerRadius: 0,
          curveFrom: '{0.0048913043478260865, 0}',
          curveMode: 4,
          curveTo: '{0.010869565217391304, 0}',
          hasCurveFrom: true,
          hasCurveTo: false,
          point: '{0.010869565217391304, 0}',
        },
        {
          _class: 'curvePoint',
          cornerRadius: 0,
          curveFrom: '{0, 0.10526315789473684}',
          curveMode: 4,
          curveTo: '{0, 0.04736842105263158}',
          hasCurveFrom: false,
          hasCurveTo: true,
          point: '{0, 0.10526315789473684}',
        },
        {
          _class: 'curvePoint',
          cornerRadius: 0,
          curveFrom: '{0, 0.9526315789473684}',
          curveMode: 4,
          curveTo: '{0, 0.8947368421052632}',
          hasCurveFrom: true,
          hasCurveTo: false,
          point: '{0, 0.8947368421052632}',
        },
        {
          _class: 'curvePoint',
          cornerRadius: 0,
          curveFrom: '{0.010869565217391304, 1}',
          curveMode: 4,
          curveTo: '{0.004891304347826087, 1}',
          hasCurveFrom: false,
          hasCurveTo: true,
          point: '{0.010869565217391304, 1}',
        },
        {
          _class: 'curvePoint',
          cornerRadius: 0,
          curveFrom: '{0.995108695652174, 1}',
          curveMode: 4,
          curveTo: '{0.9891304347826088, 1}',
          hasCurveFrom: true,
          hasCurveTo: false,
          point: '{0.9891304347826088, 1}',
        },
        {
          _class: 'curvePoint',
          cornerRadius: 0,
          curveFrom: '{1, 0.8947368421052632}',
          curveMode: 4,
          curveTo: '{1, 0.9526315789473684}',
          hasCurveFrom: false,
          hasCurveTo: true,
          point: '{1, 0.8947368421052632}',
        },
        {
          _class: 'curvePoint',
          cornerRadius: 0,
          curveFrom: '{1, 0.04736842105263157}',
          curveMode: 4,
          curveTo: '{1, 0.10526315789473684}',
          hasCurveFrom: true,
          hasCurveTo: false,
          point: '{1, 0.10526315789473684}',
        },
      ],
    });
  });
});
